<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Atividade 11</title>
</head>
<body>
    <div class="container">
        <h1>Painel Centro Cirurgico</h1>
        <form id="form-horizontal">
            <div class="row">
                <div class="form-group col-sm-6">
                    <label for="name">Nome do Paciente:</label>
                    <input type="text" class="form-control" id="name" name="nome" autocomplete="off">
                </div>
                <div class="form-group col-sm-3">
                    <label for="status">Status:</label>
                    <select class="form-control" id="status" name="status">
                        <option value="operatório">Pré Operatório</option>
                        <option value="sala-cirugia">Em sala de cirugia</option>
                        <option value="recuperação">Sala de Recuperação</option>
                        <option value="transferido">Transferido</option>
                    </select>
                </div>
                <div class="form-group col-sm-3">
                    <label for ="local">Local:</label>
                    <input type="text" class="form-control" id="local" name="local">
                </div>
            </div>
            <div class="row">
                <div class="form-group col-sm-3">
                    <label for="horaInicio">Hora Início:</label>
                    <input type="time" class="form-control" id="horaInicio" name="horaInicio">
                </div>
                <div class="form-group col-sm-3">
                    <label for="inicioPrevisto">Início Previsto:</label>
                    <input type="time" class="form-control" id="inicioPrevisto" name="inicioPrevisto">
                </div>
                <div class="form-group col-sm-3">
                    <label for="fimPrevisto">Fim Previsto:</label>
                    <input type="time" class="form-control" id="fimPrevisto" name="fimPrevisto">
                </div>
                <div class="form-group col-sm-3">
                    <label for="saidaPrevista">Saída Prevista:</label>
                    <input type="time" class="form-control" id="saidaPrevista" name="saidaPrevista">
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <button type="button" onclick="novo()">Novo</button>
                    <button type="button" onclick="gravar()">Gravar</button>
                    <button type="button" onclick="apagar()">Apagar</button>
                    <input type="" id="id" name="id" class="">
                </div>
            </div>
        </form>
        <br>
        <table class="table table-striped">
            <thead>
                <th width="40%">Nome do Paciente</th>
                <th width="30%">Status</th>
                <th width="10%">Hora início</th>
                <th width="10%">Início Previsto</th>
                <th width="10%">Fim Previsto</th>
                <th width="10%">Saída Prevista</th>
            </thead>
            <tbody id="corpoTabela">
            </tbody>
        </table>
    </div> 
    <script>
        var nomePaciente = JSON.parse(localStorage.getItem("nomePaciente"));
        if (nomePaciente == null){
            nomePaciente = [];
        }

        function gravar(){
            var paciente = {};

            paciente.nome = document.getElementById("nome").value;
            paciente.status = document.getElementById("status").value;
            paciente.local = document.getElementById("local").value;
            paciente.horaInicio = document.getElementById("horaInicio").value;
            paciente.inicioPrevisto = document.getElementById("inicioPrevisto").value;
            paciente.fimPrevisto = document.getElementById("fimPrevisto").value;
            paciente.saidaPrevista = document.getElementById("saidaPrevista").value;

            var id = document.getElementById("id").value;

            if(id == ''){
                nomePaciente.push(paciente);

            }else {
                nomePaciente[id] = paciente;
            }
            localStorage.setItem("nomePaciente", JSON.stringify(nomePaciente));
            atualizarTabela();
            novo();
        }
    </script>
</body>
</html>